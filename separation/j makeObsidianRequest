async makeObsidianRequest(code, redirectUri) {
  const body = new URLSearchParams({
    grant_type: 'authorization_code',
    client_id: this.settings.clientId,
    client_secret: this.settings.clientSecret || '',
    redirect_uri: redirectUri,
    code: code
  });

  const headers = {
    'Content-Type': 'application/x-www-form-urlencoded',
    'Accept': 'application/json',
  };

  try {
    const response = await requestUrl({
      url: 'https://anilist.co/api/v2/oauth/token',
      method: 'POST',
      headers,
      body: body.toString()
    });

    if (!response || typeof response.json !== 'object') {
      throw new Error('Invalid response structure from AniList.');
    }

    return response.json;

  } catch (err) {
    console.error('[Zoro] Obsidian requestUrl failed:', err);
    throw new Error('Failed to authenticate with AniList via Obsidian requestUrl.');
  }
}
