validateSettings(settings) {
  return {
    ...DEFAULT_SETTINGS,
    ...settings,
    gridColumns: Number.isInteger(settings.gridColumns) ? settings.gridColumns : DEFAULT_SETTINGS.gridColumns,
    redirectUri: typeof settings.redirectUri === 'string' ? settings.redirectUri : DEFAULT_SETTINGS.redirectUri,
    accessToken: typeof settings.accessToken === 'string' ? settings.accessToken : '',
    // add additional field checks as needed
  };
}

async saveSettings() {
  try {
    const validSettings = this.validateSettings(this.settings);
    await this.saveData(validSettings);
    console.log('[Zoro] Settings saved successfully.');
  } catch (err) {
    console.error('[Zoro] Failed to save settings:', err);
    new Notice('⚠️ Failed to save settings. See console for details.');
  }
}


setTimeout(() => {
  plugin.saveSettings();
}, 300); // debounce-style delay

