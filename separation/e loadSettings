async loadSettings() {
  const saved = await this.loadData();
  this.settings = this.validateSettings(saved);
}


validateSettings(data) {
  return {
    defaultUsername: typeof data?.defaultUsername === 'string' ? data.defaultUsername : '',
    defaultLayout: ['card', 'list'].includes(data?.defaultLayout) ? data.defaultLayout : 'card',
    showCoverImages: !!data?.showCoverImages,
    showRatings: !!data?.showRatings,
    showProgress: !!data?.showProgress,
    showGenres: !!data?.showGenres,
    gridColumns: Number.isInteger(data?.gridColumns) ? data.gridColumns : 3,
    clientId: typeof data?.clientId === 'string' ? data.clientId : '',
    clientSecret: typeof data?.clientSecret === 'string' ? data.clientSecret : '',
    redirectUri: typeof data?.redirectUri === 'string' ? data.redirectUri : DEFAULT_SETTINGS.redirectUri,
    accessToken: typeof data?.accessToken === 'string' ? data.accessToken : '',
  };
}