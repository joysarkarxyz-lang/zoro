async makeObsidianRequest(code, redirectUri) {
  const requestBody = {
    grant_type: 'authorization_code',
    client_id: this.settings.clientId,
    client_secret: this.settings.clientSecret,
    redirect_uri: redirectUri,
    code: code
  };

  // Method 1: Try Obsidian's requestUrl (most reliable)
  try {
    const response = await window.requestUrl({
      url: 'https://anilist.co/api/v2/oauth/token',
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Accept': 'application/json'
      },
      body: JSON.stringify(requestBody)
    });
    
    return JSON.parse(response.text);
  } catch (obsidianError) {
    console.warn('Obsidian requestUrl failed:', obsidianError);
  }

  // Method 2: Try Node.js https module (if available)
  try {
    return await this.makeNodeRequest(requestBody);
  } catch (nodeError) {
    console.warn('Node.js request failed:', nodeError);
  }

  // Method 3: Try electron net module (if available)
  try {
    return await this.makeElectronRequest(requestBody);
  } catch (electronError) {
    console.warn('Electron request failed:', electronError);
  }

  throw new Error('All request methods failed. Try manual token input.');
}